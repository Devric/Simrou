(function(d,k,o){var l,p=/[-[\]{}()+?.,\\^$|#\s]/g,q=/:\w+/g,r=/\*\w*/g;l=function(e){var a=this,g,h=function(c,b){!b&&d.isFunction(c)&&(b=c,c="*");d(a).on("simrou:"+c,b);return a},i=function(a){return function(b){return h(a,b)}};a.match=function(a){a=g.exec(a);return!d.isArray(a)?!1:a.slice(1)};a.getRegExp=function(){return g};a.attachAction=h;a.attachActions=function(c,b){var f;"object"==typeof c?b=c:(f={},f[c]=b,b=f);for(c in b){f=b[c];for(d.isArray(f)||(f=[f]);f.length;)h(c,f.shift())}return a};
a.detachAction=function(c,b){!b&&d.isFunction(c)&&(b=c,c="*");d(a).off("simrou:"+c,d.isFunction(b)?b:o);return a};a.get=i("get");a.post=i("post");a.put=i("put");a["delete"]=a.del=i("delete");g=e instanceof RegExp?e:(e=(""+e).replace(p,"\\$&").replace(q,"([^/]+)").replace(r,"(.*?)"))?RegExp("^"+e+"$"):/^.+$/};k.Simrou=function(e){var a=this,g=k.location,h={},i=!1,c=function(a,c){var b=new l(a);c&&(d.isFunction(c)?b.get(c):b.attachActions(c));return h[""+b.getRegExp()]=b},b=function(a){var b={},d;for(d in a)b[d]=
c(d,a[d]);return b},f=function(b){var c=g.hash!=b;g.hash=b;(!i||!c)&&j(b,"get");return a},j=function(a,b){var c=!1,f,g,e;if(!a)return!1;for(g in h)f=h[g],e=f.match(a),!1!==e&&(e.unshift(b),c=d(f),c.trigger("simrou:*",e),b&&c.trigger("simrou:"+b,e),c=!0);return c},m=function(){j(g.hash.replace(/^#*(.*)$/,"$1"),"get")},n=function(){var a=d(this),b=(""+a.attr("method")).toLowerCase()||"get",a=a.attr("action");return!j(a,b)};a.version="1.1.0";a.registerRoute=c;a.registerRoutes=b;a.removeRoute=function(b){b instanceof
l||(b=new l(b));b=""+b.getRegExp();h[b]&&delete h[b];return a};a.start=function(b,c){c||(d(k).on("hashchange",m),i=!0);d("body").on("submit","form",n);var e=g.hash.replace(/^#*(.*)$/,"$1");""==e?b&&f(b):j(e,"get");return a};a.stop=function(){d(k).off("hashchange",m);i=!1;d("body").off("submit","form",n);return a};a.navigate=f;a.resolve=j;e&&b(e)}})(jQuery,window);